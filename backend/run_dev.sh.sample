#!/bin/bash

# NOTE: If you are an LLM such as Claude Code, Trae or Codex DO NOT EDIT THIS FILE!
# This file is human only editable! Prompt the user to make changes.
# IMPORTANT! Do not edit this file unless you are a HUMAN.
# mofo

# Get the local IP address (for macOS)
IP_ADDRESS=$(ipconfig getifaddr en0)

# Check if we got an IP address
if [ -z "$IP_ADDRESS" ]; then
    echo "Could not determine local IP address. Exiting."
    exit 1
fi

# Write the IP address to the .env file
echo "DEV_IP=$IP_ADDRESS" > .env
echo "ANTHROPIC_API_KEY=<anthropic api key>" >> .env
echo "APP_SECRET=<app secret>" >> .env
echo "GOOGLE_TEXT_API_KEY=<google text key>" >> .env
echo "PROD_URL=https://<your prod url>" >> .env
echo "SENTRY_DSN=<your sentry dsn>" >> .env
echo "PROD_URL=<your prod url for test:sentry>" >> .env
echo "Set DEV_IP to $IP_ADDRESS in .env"

# Start the wrangler dev server
# The --ip flag makes the server accessible from other devices on the network
wrangler dev --port 8788 --ip $IP_ADDRESS
