#!/bin/bash

# NOTE: If you are an LLM such as Claude Code, Trae or Codex DO NOT EDIT THIS FILE!
# This file is human only editable! Prompt the user to make changes.
# IMPORTANT! Do not edit this file unless you are a HUMAN.
# mofo

# Get the local IP address (for macOS)
IP_ADDRESS=$(ipconfig getifaddr en0)

# Check if we got an IP address
if [ -z "$IP_ADDRESS" ]; then
    echo "Could not determine local IP address. Exiting."
    exit 1
fi

# Write the IP address to the .env file
echo "APP_SECRET=<app secret>" > .env
echo "Set DEV_IP to $IP_ADDRESS"

# Run the Flutter app, providing the .env file and DEV_IP directly
if [ ! -z $1 ]; then
  echo "flutter run --dart-define-from-file=.env --dart-define=DEV_IP=$IP_ADDRESS -d $1"
  flutter run --dart-define-from-file=.env --dart-define=DEV_IP=$IP_ADDRESS -d $1
else
  echo "flutter run --dart-define-from-file=.env --dart-define=DEV_IP=$IP_ADDRESS"
  flutter run --dart-define-from-file=.env --dart-define=DEV_IP=$IP_ADDRESS
fi

